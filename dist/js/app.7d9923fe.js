(function(){"use strict";var e={7372:function(e,t,n){var o=n(5130),r=n(6768);const l={class:"center",style:{padding:"0px 0px"}},i={style:{flex:"3"}},s={style:{flex:"1"}};function a(e,t,n,o,a,u){const c=(0,r.g2)("submitTime"),d=(0,r.g2)("timeLine");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",i,[(0,r.bF)(c)]),(0,r.Lk)("div",s,[(0,r.bF)(d)])])}const u={class:"popup-content"},c={class:"center"},d=["onDragstart","onDrop"],p={style:{display:"flex"}},m=["href"],h=["onUpdate:modelValue"],f=["value","onInput"],L=["onUpdate:modelValue"],k=["onUpdate:modelValue"],v=["onUpdate:modelValue"],y={class:"center"};function g(e,t,n,l,i,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[i.showPopup?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"popup-overlay",onClick:t[1]||(t[1]=(0,o.D$)((e=>i.showPopup=!1),["self"]))},[(0,r.Lk)("div",u,[t[11]||(t[11]=(0,r.Lk)("h2",null,"‰ΩúÊ•≠ÂàÜÈ°ûID",-1)),t[12]||(t[12]=(0,r.Lk)("p",null,[(0,r.eW)(" Redmine„ÅÆÊôÇÈñìÁôªÈå≤„ÅÆ„Éö„Éº„Ç∏„ÅßÈñãÁô∫ËÄÖ„ÉÑ„Éº„É´„Åã„ÇâÁôªÈå≤„Åó„Åü„ÅÑ‰ΩúÊ•≠ÂàÜÈ°û„ÅÆID„ÇíË™ø„Åπ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"),(0,r.Lk)("br"),(0,r.eW)(" ‰ª•‰∏ã„ÅÆÁîªÂÉè„ÅÆÂ†¥Âêà„ÅØ„ÄÅË®≠Ë®à‰ΩúÊ•≠:8„ÄÅÈñãÁô∫‰ΩúÊ•≠:9„Åß„Åô„ÄÇ "),(0,r.Lk)("img",{src:"/public/activity.png",alt:"‰ΩúÊ•≠ÂàÜÈ°ûID„ÅÆË™ø„ÅπÊñπ",style:{width:"100%"}})],-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showPopup=!1)},"Èñâ„Åò„Çã")])])):(0,r.Q3)("",!0),t[21]||(t[21]=(0,r.Lk)("h1",{class:"center"},"Âã§ÂãôË®òÈå≤„ÅÆÈõÜË®à",-1)),(0,r.Lk)("div",c,[(0,r.Lk)("table",null,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[t[15]||(t[15]=(0,r.Lk)("th",null,"‰ΩúÊ•≠Âêç",-1)),t[16]||(t[16]=(0,r.Lk)("th",null,"ÂêàË®àÊôÇÈñì",-1)),t[17]||(t[17]=(0,r.Lk)("th",null,"„ÉÅ„Ç±„ÉÉ„ÉàID",-1)),(0,r.Lk)("th",null,[t[14]||(t[14]=(0,r.eW)("‰ΩúÊ•≠ÂàÜÈ°ûID ")),(0,r.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showPopup=!0)},t[13]||(t[13]=[(0,r.Lk)("i",{class:"fa-solid fa-question"},null,-1)]))]),t[18]||(t[18]=(0,r.Lk)("th",null,"ÁôªÈå≤ÊôÇ„Ç≥„É°„É≥„Éà",-1))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.projects,((e,n)=>((0,r.uX)(),(0,r.CE)("tr",{key:n,draggable:"true",onDragstart:e=>s.dragList(e,n),onDrop:e=>s.dropList(e,n),onDragover:t[3]||(t[3]=(0,o.D$)((()=>{}),["prevent"])),onDragenter:t[4]||(t[4]=(0,o.D$)((()=>{}),["prevent"]))},[(0,r.Lk)("td",null,[(0,r.Lk)("div",p,[(0,r.bo)((0,r.Lk)("a",{href:`${i.redmineUrl}/issues/${e.redmineIssueId}`,target:"_blank"},t[19]||(t[19]=[(0,r.Lk)("img",{src:"https://www.redmine.org/favicon.ico",alt:"Redmine„ÅÆ„Ç¢„Ç§„Ç≥„É≥",style:{width:"1rem"}},null,-1)]),8,m),[[o.aG,i.redmineUrl&&e.redmineIssueId]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.name=t},null,8,h),[[o.Jo,e.name]])])]),(0,r.Lk)("td",null,[(0,r.Lk)("input",{type:"time",class:"time-input",value:s.formatTimeForInput(e.sum),onInput:t=>s.updateSum(e,t.target.value)},null,40,f)]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.redmineIssueId=t,style:{width:"4rem"}},null,8,L),[[o.Jo,e.redmineIssueId]])]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.activityId=t,style:{width:"4rem"}},null,8,k),[[o.Jo,e.activityId]])]),(0,r.Lk)("td",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.comment=t},null,8,v),[[o.Jo,e.comment]])])],40,d)))),128))])]),(0,r.Lk)("button",{style:{width:"9rem"},onClick:t[5]||(t[5]=(...e)=>s.registerAllToRedmine&&s.registerAllToRedmine(...e))},"Redmine„Å´‰∏ÄÊã¨ÁôªÈå≤")]),t[22]||(t[22]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("div",y,[(0,r.Lk)("button",{onClick:t[6]||(t[6]=e=>i.apiKeyShow=!i.apiKeyShow)},[(0,r.bo)((0,r.Lk)("span",null,"Êé•Á∂öÊÉÖÂ†±ÁôªÈå≤",512),[[o.aG,!i.apiKeyShow]]),(0,r.bo)((0,r.Lk)("span",null,"API„Ç≠„Éº„Å®Êé•Á∂öÂÖàURL„ÇíÈùûË°®Á§∫",512),[[o.aG,i.apiKeyShow]])]),(0,r.bo)((0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.apiKey=e),placeholder:"API„Ç≠„Éº„ÇíÂÖ•Âäõ",style:{width:"300px"}},null,512),[[o.Jo,i.apiKey]]),(0,r.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>s.saveApiKey&&s.saveApiKey(...e))},"‰øùÂ≠ò"),t[20]||(t[20]=(0,r.Lk)("br",null,null,-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>i.redmineUrl=e),placeholder:"Redmine„ÅÆURL„ÇíÂÖ•Âäõ",style:{width:"300px"}},null,512),[[o.Jo,i.redmineUrl]]),(0,r.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>s.saveRedmineUrl&&s.saveRedmineUrl(...e))},"‰øùÂ≠ò")],512),[[o.aG,i.apiKeyShow]])])],64)}n(4114),n(8111),n(2489),n(1701);var b=n(4373),I={name:"SubmitTime",data(){return{projects:[],redmineUrl:"",apiKey:"",apiKeyShow:!1,successProjects:[],failedProjects:[],deleteMode:!1,showPopup:!1}},created(){chrome.storage.local.get(["projects","apiKey","redmineUrl"],(e=>{e.projects&&(this.projects=Object.values(e.projects)),e.apiKey&&(this.apiKey=e.apiKey),e.redmineUrl&&(this.redmineUrl=e.redmineUrl)}))},watch:{projects:{handler:function(e){chrome.storage.local.set({projects:e})},deep:!0}},computed:{confirmMessage(){return this.projects.map((e=>{if(console.log(e.sum),"00:00:00"!==e.sum&&e.redmineIssueId&&e.activityId)return`${e.name} ${e.sum}ÊôÇÈñì`})).filter(Boolean).join("\n")}},methods:{registerAllToRedmine(){if(!confirm("‰ª•‰∏ã„ÅÆÂÜÖÂÆπ„ÅßRedmine„Å´‰∏ÄÊã¨ÁôªÈå≤„Åó„Åæ„Åô„ÅãÔºü\n"+this.confirmMessage))return;this.successProjects=[],this.failedProjects=[];const e=this.projects.map((e=>{const t=this.getTotalHours(e);return null===t?Promise.resolve():b.A.post(`${this.redmineUrl}/time_entries.json`,{time_entry:{issue_id:e.redmineIssueId,hours:t,activity_id:e.activityId,comments:e.comment}},{headers:{"Content-Type":"application/json","X-Redmine-API-Key":this.apiKey}}).then((t=>{this.successProjects.push(`#${e.redmineIssueId} ${e.name}`),console.log("Success:",t.data.time_entry)})).catch((t=>{this.failedProjects.push(`#${e.redmineIssueId} ${e.name}`),console.error("Error:",t)}))}));Promise.all(e).then((()=>{let e="üü¢‰ª•‰∏ã„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÁôªÈå≤„Å´ÊàêÂäü„Åó„Åæ„Åó„Åü\n";e+=this.successProjects.join("\n");let t="üî¥‰ª•‰∏ã„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÁôªÈå≤„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\n";t+=this.failedProjects.join("\n"),alert(e),alert(t)}))},saveApiKey(){chrome.storage.local.set({apiKey:this.apiKey}),alert("API„Ç≠„Éº„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü")},saveRedmineUrl(){chrome.storage.local.set({redmineUrl:this.redmineUrl}),alert("Redmine„ÅÆURL„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü")},formatTimeForInput(e){const t=e.split(":");let n=t[0],o=t[1];return 1===n.length&&(n="0"+n),`${n}:${o}`},updateSum(e,t){e.sum=t+":00"},getTotalHours(e){const[t,n]=e.sum.split(":").map(Number),o=t+n/60;let r="";return 0===o&&(r+="ÂêàË®àÊôÇÈñì„Åå0 "),e.redmineIssueId||(r+="„ÉÅ„Ç±„ÉÉ„ÉàID„ÅåÊú™ÂÖ•Âäõ "),e.activityId||(r+="‰ΩúÊ•≠ÂàÜÈ°ûID„ÅåÊú™ÂÖ•Âäõ "),r?(this.failedProjects.push(`#${e.redmineIssueId} ${e.name}Ôºö`+r),null):o},dragList(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setData("drag-index",t)},dropList(e,t){const n=e.dataTransfer.getData("drag-index"),o=this.projects.splice(n,1);this.projects.splice(t,0,o[0])}}},j=n(1241);const w=(0,j.A)(I,[["render",g]]);var U=w,P=n(4232);const K={class:"timeline"},T={class:"center"},x={class:"center"};function C(e,t,n,o,l,i){return(0,r.uX)(),(0,r.CE)("div",K,[t[2]||(t[2]=(0,r.Lk)("h1",{class:"center"},"Âã§ÂãôË®òÈå≤",-1)),(0,r.Lk)("div",T,[(0,r.Lk)("table",null,[t[1]||(t[1]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"ÈñãÂßãÊôÇÈñì"),(0,r.Lk)("th",null,"ÁµÇ‰∫ÜÊôÇÈñì"),(0,r.Lk)("th",null,"‰ΩúÊ•≠Âêç")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.timeLogs,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",null,(0,P.v_)(e.startTime),1),(0,r.Lk)("td",null,(0,P.v_)(e.endTime),1),(0,r.Lk)("td",null,(0,P.v_)(e.projectName),1)])))),128))])])]),(0,r.Lk)("div",x,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.clear&&i.clear(...e))},"„É≠„Ç∞„Çí„ÇØ„É™„Ç¢")])])}var D={name:"TimeLine",data(){return{timeLogs:[]}},created(){chrome.storage.local.get(["timeLogs"],(e=>{e.timeLogs&&(this.timeLogs=Object.values(e.timeLogs))}))},watch:{timeLogs:{handler:function(e){chrome.storage.local.set({timeLogs:e})},deep:!0}},methods:{clear(){confirm("Âã§ÂãôË®òÈå≤„ÅÆ„É≠„Ç∞„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åô„ÅãÔºü")&&(this.timeLogs=[])}}};const O=(0,j.A)(D,[["render",C]]);var R=O,$={name:"OptionPage",components:{submitTime:U,timeLine:R}};const A=(0,j.A)($,[["render",a]]);var S=A;(0,o.Ef)(S).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,l){if(!o){var i=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],l=e[c][2];for(var s=!0,a=0;a<o.length;a++)(!1&l||i>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[a])}))?o.splice(a--,1):(s=!1,l<i&&(i=l));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[o,r,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,l,i=o[0],s=o[1],a=o[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(a)var c=a(n)}for(t&&t(o);u<i.length;u++)l=i[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(c)},o=self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(7372)}));o=n.O(o)})();
//# sourceMappingURL=app.7d9923fe.js.map